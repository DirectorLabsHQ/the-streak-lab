function getGrade(score) {
    if (score >= 90) return { label: 'A+', color: 'bg-emerald-500' };
    if (score >= 80) return { label: 'A', color: 'bg-green-500' };
    if (score >= 70) return { label: 'B+', color: 'bg-blue-500' };
    if (score >= 60) return { label: 'B', color: 'bg-indigo-500' };
    return { label: 'C', color: 'bg-slate-600' };
}

function renderTable() {
    const body = document.getElementById('grid-body');
    const sorted = [...playerData].sort((a, b) => b[currentMetric] - a[currentMetric]);
    
    body.innerHTML = sorted.map(p => {
        const grade = getGrade(p[currentMetric]);
        return `
            <tr class="hover:bg-slate-700/30 transition-all border-b border-slate-700/30">
                <td class="px-6 py-4">
                    <div class="font-bold text-white">${p.name}</div>
                    <div class="text-[10px] text-slate-500 uppercase tracking-tighter">Verified Rotation</div>
                </td>
                <td class="px-6 py-4 text-center">
                    <div class="flex items-center justify-center gap-2">
                        <span class="px-3 py-1 rounded font-mono font-black text-white ${p[currentMetric] >= 80 ? 'bg-red-600' : 'bg-slate-700'}">
                            ${p[currentMetric]}%
                        </span>
                        <span class="${grade.color} text-[10px] font-black px-2 py-0.5 rounded shadow-sm text-white">
                            ${grade.label}
                        </span>
                    </div>
                </td>
                <td class="px-6 py-4 text-slate-300 font-medium font-mono text-xs">
                    ${p.last_game}
                </td>
                <td class="px-6 py-4 text-right font-mono text-xs text-slate-500">
                    ${p.consistency}
                </td>
            </tr>
        `;
    }).join('');
}
