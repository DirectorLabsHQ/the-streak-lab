<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Streak Lab | Prop Intelligence Grid</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .heat-high { background-color: #ef4444; color: white; border: 1px solid #7f1d1d; } /* Hot */
        .heat-med { background-color: #f97316; color: white; border: 1px solid #7c2d12; }  /* Warm */
        .heat-low { background-color: #334155; color: #94a3b8; border: 1px solid #1e293b; } /* Cold */
        .tab-active { border-bottom: 4px solid #f97316; color: #f97316; }
    </style>
</head>
<body class="bg-slate-900 text-white font-sans selection:bg-orange-500/30">

    <div class="max-w-6xl mx-auto py-10 px-4">
        <header class="flex flex-col md:flex-row md:items-end justify-between mb-8 gap-4">
            <div>
                <h1 class="text-5xl font-black italic tracking-tighter text-white">THE STREAK <span class="text-orange-500">LAB</span></h1>
                <p class="text-slate-400 font-medium uppercase tracking-widest text-sm mt-1">Advanced NBA Prop Intelligence â€¢ 2026 Edition</p>
            </div>
            <div id="last-update" class="text-xs font-mono text-slate-500 bg-slate-800 px-3 py-1 rounded-full border border-slate-700"></div>
        </header>

        <div class="flex gap-6 mb-6 border-b border-slate-800 text-sm font-bold uppercase tracking-wider overflow-x-auto pb-2">
            <button onclick="updateView('pts_heat')" id="tab-pts_heat" class="pb-2 px-2 transition-all tab-active">Points</button>
            <button onclick="updateView('reb_heat')" id="tab-reb_heat" class="pb-2 px-2 transition-all text-slate-500 hover:text-white">Rebounds</button>
            <button onclick="updateView('ast_heat')" id="tab-ast_heat" class="pb-2 px-2 transition-all text-slate-500 hover:text-white">Assists</button>
            <button onclick="updateView('tpm_heat')" id="tab-tpm_heat" class="pb-2 px-2 transition-all text-slate-500 hover:text-white">3PM</button>
            <button onclick="updateView('ft_heat')" id="tab-ft_heat" class="pb-2 px-2 transition-all text-slate-500 hover:text-white">Free Throws</button>
        </div>

        <div class="bg-slate-800 rounded-2xl shadow-2xl overflow-hidden border border-slate-700">
            <table class="w-full text-left border-collapse">
                <thead class="bg-slate-900/50 text-slate-500 uppercase text-xs font-black">
                    <tr>
                        <th class="px-6 py-4">Player</th>
                        <th class="px-6 py-4 text-center">Heat Score</th>
                        <th class="px-6 py-4">Recent Performance (Last Game)</th>
                        <th class="px-6 py-4 text-right">L10 Samples</th>
                    </tr>
                </thead>
                <tbody id="grid-body" class="divide-y divide-slate-700/50">
                    </tbody>
            </table>
        </div>

        <div class="mt-6 flex items-center justify-between text-xs text-slate-500 italic">
            <p>* Heat Score represents % of last 10 games hitting betting thresholds.</p>
            <p>NBA API Stealth V3.2 Active</p>
        </div>
    </div>

    <script>
        let playerData = [];
        let currentMetric = 'pts_heat';

        async function loadData() {
            try {
                const response = await fetch('streak_data.json');
                const json = await response.json();
                playerData = json.players;
                document.getElementById('last-update').innerText = `LIVE: ${json.last_updated}`;
                renderTable();
            } catch (e) { console.error("Data load failed", e); }
        }

        function updateView(metric) {
            // Update UI Tabs
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('tab-active', 'text-white'));
            document.querySelectorAll('button').forEach(btn => btn.classList.add('text-slate-500'));
            document.getElementById(`tab-${metric}`).classList.add('tab-active', 'text-white');
            
            currentMetric = metric;
            renderTable();
        }

        function renderTable() {
            const body = document.getElementById('grid-body');
            body.innerHTML = '';

            // Sort by current heat
            const sorted = [...playerData].sort((a, b) => b[currentMetric] - a[currentMetric]);

            sorted.forEach(p => {
                const score = p[currentMetric];
                let heatClass = 'heat-low';
                if (score >= 80) heatClass = 'heat-high';
                else if (score >= 60) heatClass = 'heat-med';

                const row = `
                    <tr class="hover:bg-slate-700/30 transition-all cursor-default group">
                        <td class="px-6 py-5">
                            <div class="font-black text-white group-hover:text-orange-400 transition-colors">${p.name}</div>
                        </td>
                        <td class="px-6 py-5 text-center">
                            <span class="inline-block w-16 py-1 rounded font-mono font-black text-sm ${heatClass}">
                                ${score}%
                            </span>
                        </td>
                        <td class="px-6 py-5">
                            <div class="text-sm text-slate-300 font-medium">${p.last_game}</div>
                        </td>
                        <td class="px-6 py-5 text-right font-mono text-xs text-slate-500">
                            ${p.consistency}
                        </td>
                    </tr>
                `;
                body.innerHTML += row;
            });
        }

        loadData();
    </script>
</body>
</html>
